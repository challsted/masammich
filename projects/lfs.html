<!DOCTYPE html>
<html lang="en">
<head>

	<meta charset="utf-8">
  	<meta http-equiv="X-UA-Compatible" content="IE=edge">
  	<meta name="viewport" content="width=device-width, initial-scale=1">
  	<meta name="description" content="A homegrown blog about Linux and Learning">
    <meta name="author" content="Chase Hallsted">
	<title>MaSammich does LFS!</title>
	<!-- Bootstrap Core CSS -->
    <link type="text/css" rel="stylesheet" href="../css/bootstrap-dark.css">
    <!-- Custom CSS -->
    <link type="text/css" rel="stylesheet" href="../css/clean-blog-dark.css">
    <link type="text/css" rel="stylesheet" href="../css/custom.css">
    <!-- Custom Fonts -->
    <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>
    <!-- Custom Favicon -->
    <link rel="shortcut icon" href="../img/favicon.ico" type="image/x-icon">

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
	<script>
		$(function(){
			$('#header').load('../content/header.html');
			$('#footer').load('../content/footer.html');
			$('#list').load('../content/101-list.html');
		});
	</script>
	<script>
		jQuery(document).ready(function() {
		    var offset = 220;
		    var duration = 500;
		    jQuery(window).scroll(function() {
		        if (jQuery(this).scrollTop() > offset) {
		            jQuery('.back-to-top').fadeIn(duration);
		        } else {
		            jQuery('.back-to-top').fadeOut(duration);
		        }
		    });
		    
		    jQuery('.back-to-top').click(function(event) {
		        event.preventDefault();
		        jQuery('html, body').animate({scrollTop: 0}, duration);
		        return false;
		    })
		});
	</script>
</head>
<body>
    <div id="header"></div>
    <!-- Set your background image for this header on the line below. -->
    <header class="intro-header" style="background-image: url('../img/header.png')">
        <div class="container">
            <div class="row">
                <div class="col-lg-10 col-lg-offset-1 col-md-12">
                    <div class="site-heading">
                        <h1 class="textoutline" style="color: white">Linux From Scratch!</h1>
                        <hr class="small">
                        <span class="subheading textoutline">Me and a few Friends dive head first into creating our very own Operating Systems!</span>
                    </div>
                </div>
            </div>
        </div>
    </header>
    <!-- Main Content -->
    <div class="container">
        <div class="row">
            <div class="col-lg-10 col-lg-offset-1 col-md-12">
				<h2>Linux From Scratch</h2>

				I help a couple of my friends learn linux, the hardway!<br/>
				<h3>Who will be joining me?</h3>
				<strong>Rhyvin</strong>, long time friend of mine, and huge geek. He has mostly worked in the windows administration side of things though. But hes not "new" to linux by any means! He partisipated in a pervious exercise i chalanged everyone to do known as the "10 Days of Arch", and he even took a stab at installing SlackWare before he knew much of anything about linux. He will be working 100% remote due to that he is located somethign like 2,000 miles away from me now. He also has a website, which you are reading a sub-domain of, go check out whats hes doing if your interested at <a href="http://technoanomaly.com">technoanomaly.com</a>, or reach out to us on the <a href="http://forum.technoanomaly.com/viewforum.php?f=1">forums</a> <br/>
				<strong>Gretiem</strong>, quickly becoming a close friend of mine due to his willingness to learn anything i throw at him, and ability to retain knowledge better then most has landed him a spot in this chalange. Prior to this chalange i have already 'converted' him to Linux. He has his laptop running linux fulltime, and his desktop has a windows partision that he only uses when he wants to play a game he cant get to work on linux first.<br/>
				<strong>FullOverRide</strong>, a recent addition to my group of friends, he had very little linux expierence when he joined this team. He has a light background in C/C++, but never had a reason to touch Linux. I will be spending an extra week with him prior to everyone else pushing him though a kind of "Linux Bootcamp" to help force into his fingers linux commands and struture. He has already made the comment that he loves linux so far, and even installed linux(Xubuntu) onto his laptop.<br/>
				<br/>
				We all have the same computers. Intel Core2Duo's, with 2GB of 800mhz DDR3 RAM<br/>
				An 80GB HDD that for at leats 4 of them i have partisioned to have a 6.1 GB at the start of the hdd running Debian 7.8, and a 3.3 GB partision at the end for SWAP. Leaving about 70GB in the middle to do what ever everyone wants to with it.<br/>
				We bought 5 of them because they were cheap, so we have 1 for each of us, and a 5th is planned to be setup as a server for various stuff<br/>
				I also found that we needed to install a few packages, and make a few symlinks. I saved all of this into a <a href="https://gist.github.com/hackinginformation/7fd7ddd7ac3855e420bf#file-debian2lfs">gist</a> and put it on <a href="https://github.com/hackinginformation/linuxfromscratch">my GitHub</a>. 
				<br/>
				Click each date below to expand and see whats going on each date.<br/>
				If comments from the members (other then me) are available i will add a comment section to that date expressing what they asked me to add.<br/>


				<div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true"><!-- Start of Acordian -->

				  <div class="panel panel-default">
				    <div class="panel-heading" role="tab" id="headingOne">
				      <h4 class="panel-title">
				        <a data-toggle="collapse" data-parent="#accordion" href="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
				          Friday Feb 6, 2015
				        </a>
				      </h4>
				    </div>
				    <div id="collapseOne" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="headingOne">
				      <div class="panel-body">					    
						<p>
						We start this journey with fresh hardware, all we have done so far is power them on, make sure they boot from USB (they dont) and then begin trying to install an OS<br/>
						So we started instaling XUbuntu 14.04 onto them, then realized that Ubuntu (and its diritives) have many many issues when building LFS. So we desided to go with Debian. <br/>
						As i type this im in the process of useing "dd" to copy the 1 full HDD over to another HDD (sadly, this takes about 4 hours for 80GB) then ill have 2 HDD's, then ill start the process over again but with 2 desktops to make 4 HDD's!!! and the 5th one was hawled off today by one of the guys who wants to catch up to the game with out risking his personal laptop (which does have linux on it)<br/>
						<br/>
						I plan on updateing this weekly (we meet up on fridays) to detail everything we do. But due to that i have a lot to do still before the night ends, Ill just push this out.<br/>
						UPDATE: I discovered that you can change the blockside to 32M, and get MUCH faster writes, but also faster fails if anything happens...) for reference the command i used in the end was <code class="codeInput">dd if=/dev/sda of=/dev/sdb bs=32M conv=sync,noerror</code>
						</p>
				     </div>
				    </div>
				  </div>

				  <div class="panel panel-default">
				    <div class="panel-heading" role="tab" id="headingTwo">
				      <h4 class="panel-title">
				        <a data-toggle="collapse" data-parent="#accordion" href="#collapseTwo" aria-expanded="true" aria-controls="collapseTwo">
				          Saturday, Feb 7 - Monday Feb 9 2015
				        </a>
				      </h4>
				    </div>
				    <div id="collapseTwo" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingTwo">
				      <div class="panel-body">
					    <p>
						So, after my normal DND Campaign on Saturday, the one hardcharger who wanted to be ahead called me on google hangouts and we worked though LFS untill 4am. We got much further then when i had attempted the same useing XUbuntu 14.04, and i 100% say that this is due to Debian having much older packages not only in there repository, but also by default. Many of these needed packages were already in the supported versions and i only had to install a few things and make some symlinks to get it all up-to-date <a href="https://gist.github.com/hackinginformation/7fd7ddd7ac3855e420bf#file-debian2lfs">Gist I saved</a><br/>
						This trend continued until Monday, when he was working though chapter 6, and he had a fatal error complaining that a certain package was so old it couldnt be used anymore. It was late, we didnt know what to do, we started trying to recompile again, still same error, bcked up a step, recompiled the previous package, then went forward, still same error. Backed all the way to chapter 5, and tried compileing glibc again and then come back (hopeing it was an error with the origional), still same error.<br/>
						Disheartened, angry, quite depressed, we decided to go to bed and try again the next day. Im not sure exactly what happened at this point, but FullOverRide had desided to wipe the partisions, and start fresh.
						I also discovered Monday, that my attempts at cloneing a harddrive somehow was an epic failure. Im still not sure what happened...
						One of the members of my group who is known as "Gretiem" installed Debian onto one of the 5 harddrives, created a user called "gretiem" and setup a few basic things. The issue is that by default Debian uses Gnome 3 and im not a fan at all of Gnome 3 (gnome 2 fan...). So I installed XFCE from the default repo's, I added all of the users we would need (MaSammich, FullOverRide, Rhyvin, lfs, and obviously Gretiem was already there), i setup ssh on the box, i played with the GUI if we ever even get to see it, tweeked ZSH for all of the new users, tweeked vim for all of hte users, setup a more sensible password for the root user, downloaded all of the source code from the LFS book and md5sum'd it all to make sure it was good.<br/>
						I felt like everything was going great! I shut down the computer, booted to a live USB, launched a terminal and ran the command i gave above (dd) and let it do its thing. Afterwords i ran a md5sum on both hdd's and they came out ot the exact same sum. I was soo happy! I shut down the computer again, unplugged the origional hdd, and only left the 2nd hdd plugged in.<br/>
						<code class="codeOutput">NO OS FOUND PRESS ANY KEY TO CONTINUE...</code> repeats accrost my screen.<br/>
						Ok, not that bad, BIOS must not be able to boot from the 2nd hdd b/c its plugged into where the DVD Drive was. I turn off the computer, unplug the 2nd hdd and plug it into where the first HDD was located. Turn it back on.<br/>
						<code class="codeOutput">NO OS FOUND PRESS ANY KEY TO CONTINUE...</code><br/>
						Well thats just great... i guess the clone didnt work after all! So i unplug the 2nd hdd, angry, but its ok i thought. Plug the first back in, and boot. Im greeted with only 1 user (Gretiem), and only Gnome 3 installed...., i try to log in with the password i reset his account to its a no-go. I knew the password he had used (it was a simple one so i could login and configure), i launch a terminal, its bash (not ZSH), i try to vi a random text file in hit home dir and im not greeted with the beautifual VIM i had configured instead im gretted with the default VI package....<br/>
						That was only a few days ago as i write this, but i still have no idea what happened. None of the changes i made saved, i shut down properly, i made sure everything was peachy-keen before i shut the box down. Yet i still had none of the changes saved, and also the clone of sda to sdb (even with md5sum) was non-successful. Im not sure if md5sum dosnt check the contents of the hdd or something, but im still not sure why it reported them being exactly the same when 1 didnt have a OS on it (i also tried mounting the 2nd hdd and takeing a look inside, nothing was in it but "lost+found")<br/>
						</p>
				     </div>
				    </div>
				  </div>

				  <div class="panel panel-default">
				    <div class="panel-heading" role="tab" id="headingThree">
				      <h4 class="panel-title">
				        <a data-toggle="collapse" data-parent="#accordion" href="#collapseThree" aria-expanded="true" aria-controls="collapseThree">
				          Tuesday Feb 10 2015
				        </a>
				      </h4>
				    </div>
				    <div id="collapseThree" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingThree">
				      <div class="panel-body">						
						<p>
						I discover that FullOverRide had wiped the partisions clean, and was starting over from scratch again. This is ok as it prevents any potential errors that he had introduced. But this time i could only listen to him and not help, i was sitting in my chair at home but was still working away with him on my phone talking about what he was doing and if he ran into any issues (he understood the process much better going though it all a 2nd time, so he had far fewer questions). <br/>
						He managed to knock out Chapter 5 in about an hour, maybe 2 (i wasnt counting)<br/>
						Then when we started chapter 6 (where we failed lasttime was at glibc) he got to that point, read the full page, before starting, and realized that on the page, in BIG, BOLD, RED lettering was a note... that said that the specific package that he was having an error that prevented his package from comileing is expected, and gave him a piece of code to help make the error go away...<br/>
						So due to the amount of time it will take to complete, he ran the make, then when he woke up for work in the morning he ran the test. Everything came out clean and working as expected, we continued down until the end of chapter 6 and ended the hangout.<br/>
						</p>
				     </div>
				    </div>
				  </div>

				  <div class="panel panel-default">
				    <div class="panel-heading" role="tab" id="headingFour">
				      <h4 class="panel-title">
				        <a data-toggle="collapse" data-parent="#accordion" href="#collapseFour" aria-expanded="true" aria-controls="collapseFour">
						 	Wednesday Feb 11 2015
				        </a>
				      </h4>
				    </div>
				    <div id="collapseFour" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingFour">
				      <div class="panel-body">
						<p>
						FullOverRide was able to complete all the way to the Kernel install, but due to the way we are installing all of this, we were very setback by the GRUB section. We didnt want to wipe Debian off yet so we had a fallback incase of issues. So we spent over an hour trying to find a way for him to allow me to see his grub.cfg file. Once we had it working (we had to run update-grub from debian) we could see both kernels and we booted into LFS.<br/>
						Now, were booted in, we see the normal stuff going by our screen, were both super excited, but then it asks for a runlevel. He entered <code class="codeInput">3</code> (Run Level 3, aka rc.3, is multi-user with networking, or as i believe the book called it "Full Multiuser"), and it then said something like "No more moduels to load for this runlevel". Then it just sat there. From here commenses an issue we fought for the rest of the night, something was missing, it wasnt asking for a UN/PW combo it just sat there... So we ended the hangout and he let it sit there all night long.<br/>
						</p>
				     </div>
				    </div>
				  </div>

				  <div class="panel panel-default">
				    <div class="panel-heading" role="tab" id="headingFive">
				      <h4 class="panel-title">
				        <a data-toggle="collapse" data-parent="#accordion" href="#collapseFive" aria-expanded="true" aria-controls="collapseFive">
				          Thursday Feb 12, 2015
				        </a>
				      </h4>
				    </div>
				    <div id="collapseFive" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingFive">
				      <div class="panel-body">
				      		<p>
						    While at work, i was having trouble focusing on my normal drill of answering IM's and emails and fixing peoples issues and makeing there programs work. I didnt understand why he couldnt get a full boot, then it kind of just popped into my head. "Its not loading the kernel!" I did some research and found what i believed was that grub was not pointing to the correct kernel, and that we had apparently not configured one of the sections correctly because it was asking for a runlevel instead of just booting into 3. So about 6pm he calls me, i explain my theory, we go back to the approparite sections of the book, tweek the settings we think needs tweeked and reboot.<br/>
						    IT WORKS! It dosnt ask for a runlevel anymore it just boots straight in, about 8 seconds after the POST he is greeted with a "<code class="codeOutput">login:</code> prompt. So, that issue was fixed, but something else i thought of once i thought i had solved the case. We have no networking. Sure, were booted into rc.3 but we havnt done anything to setup networking (he skipped the section about createing a static IP due to we planned on setting up DHCP). So we booted back into debian, mounted everything, and chrooted in again. The end of the book (<a href="http://www.linuxfromscratch.org/lfs/view/stable/chapter09/reboot.html">9.3</a>) has links to BLFS (Beyond Linux From Scratch) packages such as dhcp, dhcpcd, Lynx, wget, OpenSSH &amp; OpenSSL (needed for SSH), and others. So we started configureing dhcp, everything seems to be working from the chroot so we boot back into LFS and its unable to find eth0. We now fight with this for the rest of the day and sadly get nowhere.... <br/>
						    </p>
				     </div>
				    </div>
				  </div>

				  <div class="panel panel-default">
				    <div class="panel-heading" role="tab" id="headingSix">
				      <h4 class="panel-title">
				        <a data-toggle="collapse" data-parent="#accordion" href="#collapseSix" aria-expanded="true" aria-controls="collapseSix">
				          Friday Feb 13, 2015
				        </a>
				      </h4>
				    </div>
				    <div id="collapseSix" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingSix">
				      <div class="panel-body">
						<p>
						Today was mostly spent setting up a network (I plan to create a diagram of what it looks like soon), plugging everyones computers in, powering on and testing things, and fighting with hardware (My PC refused to poweron at all, the server powered on but wasnt outputting any power to USB ports or anything out of VGA1, gretiems PC desided the HDD had no OS on it, rhyvins desided it couldnt even see a hdd at all, and fulloverrides the hdd out of the bootsequence and actually put it into the "do not boot from this" section...).<br/>
						Gretiem actually didnt even get to touch his PC all day, he fought with getting minicom setup (a way to access switch/routers from linux), then fought with the gear for a while (not sure what all he was doing TBH, I brain dumped most of my Cisco Training a long while ago), I do know that he went to do a hardboot of his router and got zapped and it actually rebooted the router... (brought it up into a critical shutdown mode apparently too).<br/>
						I have successfully setup a way for everyone to enter from the outside world into each of the box's via 2 wireless routers, static IP's, and port forwarding.<br/>
						I even setup <a href="http://www.nethack.org/">NetHack</a> on my RPi B+ while i waited.
						</p>
				     </div>
				    </div>
				  </div>

				<div class="panel panel-default">
				    <div class="panel-heading" role="tab" id="headingSeven">
				      	<h4 class="panel-title">
				        	<a data-toggle="collapse" data-parent="#accordion" href="#collapseSeven" aria-expanded="true" aria-controls="collapseSeven">
				          	Saturday Feb 14, 2015
				        	</a>
				      	</h4>
				    </div>
				    <div id="collapseSeven" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingSeven">
				      	<div class="panel-body">
							<p>
							Yes, I worked on this project on Valentines day! Yes, my wife was ok with it :P<br/>
							FullOverRide came over and we actually got his DHCP issues fixed, (well they were actually kernel not loading driver issues), then we ran into an issue where his computer didnt have a /dev/random or /dev/urandom (or MANY other things), turned out he had not remounted tempfs when trying to compile OpenSSL and there for it was failing (it didnt have a way to get entropy). Once we got that fixed he was fully setup and ready to go :D<br/>
							I also finaly started this project, giving everyone an equal chance to start along with me.<br/>
							I completed Chapter 5 of the LFS 7.6 book and began going though chapter 6. Ill document here that im doing it slightly different then everyone else.<br/>

							I am useing a 2nd 3TB hdd, that has had a few partisions cut out of the begining.<br/>

							<ol>
								<li>A 512MiB /boot primary partision formateed to ext4, marked as sdx1</li>
								<li>A 30GiB Extended partision that is split up into several smaller partisions, marked as sdx2</li>
								<ol>
									<li>10GiB / (root) partision formated to ext4, marked as sdx5</li>
									<li>20GiB /home partision formated to ext4, marked as sdx6</li>
								</ol>
							</ol>

							I am also doing it all over SSH, instead of connecting directly to the compuer. Everything went Smoothly until I started getting to some of the programs that were takeing 10+ minutes to compile or do their tests, my ssh session was ending in the middle of me doing something. Then wouldnt allow me to reconnect for several minutes.<br/>
							I fixed this by adding the following to my ~/.ssh/config<br/>
							&emsp;<code class="codeInput">Serveraliveinterval 100</code>, this sends a keepalive packet to the server every 100 seconds to keep my session alive. I didnt have any issues after that!<br/>

							I believe thats all I'm doing differently then the "standard" listed above.<br/>
							<br/>
							OPTIONAL: you can download my "Expand" script <a href="https://github.com/hackinginformation/linuxfromscratch/blob/master/expand.sh">here</a>. You can add the contents of this to your lfs user's ~/.bashrc. I personally also added it to my root user's bashrc, and when you get into the LFS enviroment, you can add it to your root users bashrc by running <code class="codeInput">cat /sources/expand.sh ~/.bashrc &amp;&amp; source ~/.bashrc</code>, this assumes you have put my script into your /sources dir. Change the aboe to suit your specific builds needs. This script is used to expand every file I have ran into during the building process of LFS.<br/>
							</p>
				     	</div>
				    </div>
				</div>

				<div class="panel panel-default">
				    <div class="panel-heading" role="tab" id="headingEight">
				      	<h4 class="panel-title">
				        	<a data-toggle="collapse" data-parent="#accordion" href="#collapseEight" aria-expanded="true" aria-controls="collapseEight">
				          	Sunday Feb 15, 2015
				        	</a>
				      	</h4>
				    </div>
				    <div id="collapseEight" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingEight">
				      	<div class="panel-body">
							<p>
							I completed Chapter 6 - 9. Compiled the kernel to add the e1000e drivers for our NIC that caused so many issues for FullOverRide. But before i started the reboot, i began dabbling with BLFS (Beyond Linux From Scratch). I installed OpenSSL, OpenSSH, DHCP, wget, git, cURL, and a lot of other stuff in prep for this coming weekend. I plan on installing XWindows this weekend and if time allows install XFCE before this time next week.<br/>
							To continue on though, i rebooted the system, selected the 2nd hdd to boot first, and realized that i somehow borked the grub.cfg file. I was greeted with an error saying that the kernel specified, was not found. I could press "e" to edit the grub.cfg or i could press "c" for a commandline. I have dabbled in the "rescue>" menu before, but never in the "grub>" menu. I played around for a bit and realized they ahve added A LOT of options since grub 1.99, so i went back, and tried my hand at directly editing the file. That didnt work so well, i ended up with about 4 boot options but all of them didnt work. So i went back to the commandline, poked around for a bit, found my kernel, and tried to boot it.<br/>
							Im still not sure what i did, but i somehow booted into debian, but used my 3.16 kernel (debian runs on a 3.2 kernel). I got to the debian login screen, and after entering my credientials the computer froze up. By this point it was nearing 1am so i had to get off the computer and go to bed. I plan to play with it a little bit after work today, but not much. I wont have time to do much with it until friday after work again. So, I probably wont be updateing until then!<br/>
							</p>
				     	</div>
				    </div>
				</div>

				<!-- EXAMPLE!!!
				<div class="panel panel-default">
				    <div class="panel-heading" role="tab" id="headingReplace">
				        <h4 class="panel-title">
				        	<a data-toggle="collapse" data-parent="#accordion" href="#collapseReplace" aria-expanded="true" aria-controls="collapseReplace">
				        	TITLE
				        	</a>
				      	</h4>
				    </div>
				    <div id="collapseReplace" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingReplace">
				      	<div class="panel-body">
						CONTENT
				     	</div>
				    </div>
				</div> 
				END EXAMPLE!!! -->

				</div><!-- End Div Tag -->

				<div id="disqus_thread"></div>
				<script type="text/javascript">
					var disqus_shortname = 'masammich';
					(function() {
						var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
						dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
						(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
					})();
				</script>
				<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
				<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
			</div>
		</div>
	</div>

    <!-- Footer -->
    <div id="footer"></div>
    <!-- jQuery -->
    <script src="../js/jquery.js"></script>
    <!-- Bootstrap Core JavaScript -->
    <script src="../js/bootstrap.min.js"></script>
    <!-- Custom Theme JavaScript -->
    <script src="../js/clean-blog.min.js"></script>
</body>
</html>
